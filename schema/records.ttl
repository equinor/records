PREFIX :     <https://rdf.equinor.com/ontology/record-syntax/>
PREFIX dc:   <http://purl.org/dc/elements/1.1/>
PREFIX owl:  <http://www.w3.org/2002/07/owl#>
PREFIX prov: <http://www.w3.org/ns/prov#>
PREFIX rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX rec:  <https://rdf.equinor.com/ontology/record/>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
PREFIX xml:  <http://www.w3.org/XML/1998/namespace>
PREFIX xsd:  <http://www.w3.org/2001/XMLSchema#>

rec:Record  rdf:type     owl:Class;
        rdfs:comment     "A record is an RDF dataset where there exists at least two named graphs. 1) The record metadata and 2) at least one other named graph as its member.";
        rdfs:label       "Record";
        rdfs:seeAlso     <http://purl.obolibrary.org/obo/IAO_0000027>;
        rdfs:subClassOf  rec:BlankRecord .

rec:DeletionRecord  rdf:type  owl:Class;
        rdfs:comment     "A deletion record has no members. This is used for the situation where, in the given scopes, the elements described no longer exist or are no longer relevant.";
        rdfs:label       "Deletion record";
        rdfs:subClassOf  rec:BlankRecord .

rec:BlankRecord  rdf:type  owl:Class;
        rdfs:comment     "A blank record has no real meaning on its own, it is up to any system implementing the type to determine how it is interpreted.";
        rdfs:label       "Blank record";
        rdfs:subClassOf  prov:Collection .

rec:related  rdf:type       owl:ObjectProperty;
        rdfs:comment        "A relation between a record and some IRI. These IRIs are related to the content of the record in some undefined manner. This can be used as a less strict version of rec:isInScope, f.e.x when indexing is needed but branching is not wanted.";
        rdfs:domain         rec:Record;
        rdfs:label          "related";
        rdfs:seeAlso        rec:isInScope;
        rdfs:subPropertyOf  skos:related .

rec:isInScope  rdf:type  owl:ObjectProperty;
        rdfs:comment  "Declares the scope in which the content of the record is valid. When there are several triples with the same subject the meaning is that the content is valid in the intersection of all the scopes. The scopes can be used to route the record to the correct storage and to regulate access. This relation propagates along rec:hasMember";
        rdfs:domain   rec:Record;
        rdfs:label    "is in scope";
        rdfs:seeAlso  <http://purl.obolibrary.org/obo/IAO_0000142> .

rec:hasMember  rdf:type     owl:ObjectProperty;
        rdfs:comment        "A relation between some record and some other named graph. This means that the metadata available in the record is applicable to the member graph.";
        rdfs:domain         rec:Record;
        rdfs:label          "has member";
        rdfs:subPropertyOf  prov:hadMember .

rec:describes  rdf:type  owl:ObjectProperty;
        rdfs:comment  "This relates a record to all the objects described in its member graphs. All IRIs described must occur in some of the content, and for any IRI occurring in the content/dataset, there must be a path between that IRI and one of the describes IRIs using only triples occurring in the content/dataset.";
        rdfs:domain   rec:Record;
        rdfs:label    "describes";
        rdfs:seeAlso  <http://purl.obolibrary.org/obo/IAO_0000219> .

skos:relatedProperty  rdf:type  owl:AnnotationProperty .

:       rdf:type        owl:Ontology;
        owl:imports     <http://www.w3.org/ns/prov-o> , <http://www.w3.org/2004/02/skos/core>;
        owl:versionIRI  :2025-05-13 .

rec:NewestRecord  rdf:type   owl:Class;
        rdfs:comment         "This is a record which has not been replaced, and is therefore the newest.";
        rdfs:subClassOf      rec:Record;
        owl:disjointWith     rec:ReplacedRecord;
        owl:equivalentClass  [ rdf:type            owl:Restricton;
                               owl:maxCardinality  0;
                               owl:onProperty      rec:replacedBy
                             ] .

rec:ReplacedRecord  rdf:type  owl:Class;
        rdfs:comment         "This is a record which has been replaced.";
        rdfs:subClassOf      rec:Record;
        owl:equivalentClass  [ rdf:type            owl:Restricton;
                               owl:onProperty      rec:replacedBy;
                               owl:someValuesFrom  rec:Record
                             ] .

rec:hasRecordMember  rdf:type  owl:ObjectProperty;
        rdfs:comment        "Used when a record has content which is another record. This nesting of records could f.ex. be used to group records into a transaction. ";
        rdfs:domain         rec:Record;
        rdfs:label          "has record member";
        rdfs:range          rec:Record;
        rdfs:subPropertyOf  rec:hasMember .

rec:replaces  rdf:type      owl:ObjectProperty;
        rdfs:comment        "A record replaces the \"previous version\" of the record. The semantics is a full replace, that is, all the triples in the replaced version are removed and replaced by the present record. Note that subrecords are inherited from the replaced record";
        rdfs:domain         rec:Record;
        rdfs:label          "replaces";
        rdfs:range          rec:Record;
        rdfs:subPropertyOf  prov:wasRevisionOf;
        rdfs:subPropertyOf  [ owl:inverseOf  rec:replacedBy ] .

rec:replacedBy  rdf:type  owl:TransitiveProperty , owl:ObjectProperty;
        rdfs:comment  "This is the transitive closure of the inverse relation rec:replaces.";
        rdfs:domain   rec:Record;
        rdfs:range    rec:Record .

rec:hasNewerSuperRecordInf
        rdf:type                owl:ObjectProperty;
        rdfs:comment            "These are all the super records which replaces the asserted super record.";
        rdfs:domain             rec:Record;
        rdfs:range              rec:Record;
        owl:propertyChainAxiom  ( rec:isInSubRecordTreeOf rec:replacedBy ) .

rec:isInScopeInf  rdf:type      owl:ObjectProperty;
        rdfs:comment            "These are the scopes that a record inherits from its super-records, union with the explicit given scopes";
        rdfs:domain             rec:Record;
        owl:propertyChainAxiom  ( rec:isInSubRecordTreeOf rec:isInScope ) .

rec:isSubRecordOf  rdfs:subPropertyOf  rec:isInSubRecordTreeOf .

rec:isInSubRecordTreeOf
        rdf:type            owl:TransitiveProperty , owl:ObjectProperty;
        rdfs:comment        "This is the transitive closure of the relation rec:isSubRecordOf.";
        rdfs:domain         rec:Record;
        rdfs:range          rec:Record;
        rdfs:subPropertyOf  rec:hasNewerSuperRecordInf .

<https://rdf.equinor.com/ontology/record-rules/>
        rdf:type        owl:Ontology;
        rdfs:comment    "This ontology does not make sense to apply to individual records, and does not give rules for individual records. Rather, the provenance from several records can be collected in a single graph, and then this ontology can be used on that graph to calculate head and scopes based on this. ";
        owl:imports     :;
        owl:versionIRI  rec:2022-12-05 .